version: '3'
env:
  TEST_DEVICE_NAME: '{{.TEST_DEVICE_NAME | default "Studio1"}}'
  TEST_DEVICE_IP: '{{.TEST_DEVICE_IP | default "10.0.8.24"}}'

tasks:
  test:
    cmds:
      - cargo test -- --nocapture

  cap:
    cmds:
      - cargo test

  test-*:
    vars:
      MOD: '_{{index .MATCH 0}}'
    cmds:
      - cargo test heos{{.MOD}}_test

  cap-*:
    vars:
      MOD: '_{{index .MATCH 0}}'
    cmds:
      - cargo test heos{{.MOD}}_test -- --nocapture
